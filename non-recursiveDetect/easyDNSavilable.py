import dns.resolver
import dns.name
import dns.message
import dns.query
import time
import socket
def query(domain, name_server):
    domain = dns.name.from_text(domain)
    if not domain.is_absolute():
        domain = domain.concatenate(dns.name.root)

    
    request = dns.message.make_query(qname = domain,
                                     rdtype = dns.rdatatype.A)

    response = dns.query.udp(q=request,
                             where=name_server,
                             timeout=2)
    return response

name_server_list=[]
f=open("selective.txt")
for line in f.readlines():
    name_server_list.append(str(line).split()[0])
domain = "www.baidu.com"
e=[]
for i in ['111.12.76.1', '111.12.76.2', '111.12.76.3', '111.12.76.4', '111.12.76.5', '111.12.76.6', '111.12.76.7', '111.12.76.8', '111.12.76.9', '111.12.76.129', '111.12.76.130', '111.12.76.131', '111.12.76.132', '111.12.76.133', '111.12.76.134', '111.12.76.135', '111.17.171.50', '111.47.61.2', '111.63.3.162', '117.139.72.226', '117.141.38.170', '117.141.38.180', '117.146.102.106', '117.146.103.182', '117.190.78.122', '120.197.158.84', '120.199.20.158', '120.199.132.94', '120.202.47.244', '120.209.190.54', '112.5.128.133', '112.12.27.162', '112.16.85.20', '112.16.85.35', '112.16.85.39', '112.16.87.120', '112.16.87.171', '120.192.28.78', '120.193.64.10', '120.194.102.10', '120.203.85.250']:
    print i

name_server_list=['111.12.73.244', '111.12.76.1', '111.12.76.2', '111.12.76.3', '111.12.76.4', '111.12.76.5', '111.12.76.6', '111.12.76.7', '111.12.76.8', '111.12.76.9', '111.12.76.129', '111.12.76.130', '111.12.76.131', '111.12.76.132', '111.12.76.133', '111.12.76.134', '111.12.76.135', '111.14.199.86', '111.16.27.135', '111.17.171.50', '111.28.23.79', '111.28.27.95', '111.28.31.144', '111.28.31.176', '111.28.31.198', '111.30.86.202', '111.37.151.67', '111.41.163.195', '111.41.209.234', '111.41.216.225', '111.47.61.2', '111.51.18.30', '111.58.37.86', '111.58.40.10', '111.58.40.84', '111.58.40.98', '111.58.40.122', '111.58.40.150', '111.58.46.49', '111.58.46.55', '111.58.124.71', '111.58.139.244', '111.58.157.102', '111.58.208.165', '111.58.208.184', '111.58.234.210', '111.58.252.102', '111.58.252.125', '111.59.65.37', '111.59.175.238', '111.59.175.250', '111.59.176.14', '111.59.176.62', '111.59.176.74', '111.59.176.87', '111.59.243.96', '111.59.246.97', '111.59.246.100', '111.59.246.112', '111.63.3.162', '111.0.56.127', '111.0.56.146', '111.0.168.236', '111.0.169.20', '111.0.169.62', '111.0.169.65', '111.0.171.230', '111.1.147.129', '111.1.147.142', '111.1.204.161', '111.1.204.189', '111.1.204.192', '111.1.205.12', '111.2.6.69', '111.2.6.121', '111.2.6.123', '111.3.34.141', '111.3.91.11', '111.3.93.56', '111.3.93.72', '111.3.94.134', '111.3.94.162', '111.3.94.192', '111.3.95.28', '111.3.204.209', '111.3.207.101', '117.139.28.118', '117.139.72.139', '117.139.72.226', '117.139.185.3', '117.139.185.9', '117.140.57.38', '117.140.57.60', '117.140.57.142', '117.140.57.176', '117.140.119.131', '117.140.119.169', '117.140.119.174', '117.140.119.175', '117.140.163.98', '117.140.163.102', '117.140.168.5', '117.140.222.237', '117.140.222.242', '117.140.223.1', '117.141.29.68', '117.141.29.79', '117.141.38.170', '117.141.38.180', '117.141.38.191', '117.143.3.114', '117.143.51.196', '117.143.51.240', '117.143.52.62', '117.143.52.76', '117.143.55.6', '117.143.55.23', '117.143.55.49', '117.143.173.151', '117.143.178.16', '117.144.138.40', '117.144.138.58', '117.144.208.114', '117.145.8.143', '117.145.8.230', '117.145.8.255', '117.145.9.30', '117.145.9.59', '117.145.9.122', '117.145.9.136', '117.145.9.174', '117.145.14.171', '117.145.14.211', '117.146.93.2', '117.146.93.10', '117.146.102.106', '117.146.102.226', '117.146.102.230', '117.146.103.58', '117.146.103.114', '117.146.103.142', '117.146.103.182', '117.146.103.190', '117.146.103.198', '117.146.107.70', '117.146.107.217', '117.146.161.192', '117.146.168.7', '117.146.168.8', '117.146.168.54', '117.190.78.122', '117.191.163.131', '117.191.235.187', '117.191.236.59', '117.191.240.39', '117.191.244.43', '117.191.244.59', '120.197.158.84', '120.199.20.158', '120.199.126.114', '120.199.127.98', '120.199.132.94', '120.202.47.244', '120.208.35.99', '120.208.35.101', '120.209.185.246', '120.209.190.54', '120.212.69.143', '120.212.69.201', '120.212.70.1', '120.212.191.189', '120.212.245.140', '120.212.245.210', '120.212.248.165', '120.212.249.91', '120.213.95.221', '120.213.102.18', '120.213.108.74', '120.213.108.112', '120.213.108.211', '120.213.109.25', '120.213.227.43', '120.213.227.59', '120.214.34.195', '120.214.94.73', '120.214.146.57', '120.215.8.233', '120.215.13.141', '120.215.68.90', '120.215.71.74', '120.215.71.118', '120.215.71.124', '120.215.71.137', '120.215.79.64', '120.215.125.179', '120.215.125.194', '120.215.243.1', '120.216.34.182', '120.216.44.45', '120.216.148.163', '120.216.169.103', '120.217.200.164', '120.218.3.113', '120.218.3.128', '120.218.42.6', '120.218.42.19', '120.218.102.65', '120.218.157.105', '120.218.170.46', '120.218.173.152', '120.219.91.148', '120.219.131.180', '120.219.131.197', '120.219.147.105', '120.236.48.105', '111.10.56.100', '111.10.56.155', '111.10.57.93', '111.10.57.103', '112.0.210.17', '112.0.210.181', '112.0.210.197', '112.2.185.53', '112.2.185.159', '112.4.43.212', '112.5.74.154', '112.5.74.233', '112.5.74.241', '112.5.78.36', '112.5.128.133', '112.5.181.87', '112.5.181.113', '112.5.181.129', '112.5.181.133', '112.5.181.138', '112.5.181.164', '112.5.181.173', '112.5.181.177', '112.5.181.199', '112.5.181.238', '112.6.110.215', '112.6.175.71', '112.6.219.5', '112.6.219.8', '112.6.222.63', '112.6.222.87', '112.6.222.200', '112.6.223.8', '112.6.225.67', '112.6.225.96', '112.6.225.123', '112.6.225.129', '112.6.225.177', '112.6.228.99', '112.6.228.130', '112.6.230.5', '112.7.25.144', '112.7.25.163', '112.7.28.227', '112.7.81.105', '112.7.87.17', '112.7.142.235', '112.7.197.173', '112.7.197.190', '112.7.200.173', '112.8.53.237', '112.8.152.34', '112.8.179.117', '112.8.180.221', '112.8.230.146', '112.8.232.247', '112.8.233.16', '112.8.233.33', '112.8.235.8', '112.8.236.44', '112.8.236.47', '112.8.236.95', '112.8.236.129', '112.9.35.145', '112.9.38.158', '112.9.38.163', '112.9.39.4', '112.9.39.65', '112.9.39.113', '112.9.91.7', '112.11.42.164', '112.11.42.181', '112.11.42.198', '112.11.57.193', '112.11.219.34', '112.11.219.56', '112.12.27.162', '112.12.191.134', '112.12.199.91', '112.12.199.144', '112.12.203.255', '112.12.204.168', '112.12.248.207', '112.12.251.198', '112.13.2.20', '112.13.2.83', '112.13.2.202', '112.13.3.59', '112.13.5.55', '112.13.5.158', '112.13.8.78', '112.13.123.94', '112.13.123.148', '112.14.34.9', '112.14.34.40', '112.14.34.105', '112.14.34.165', '112.14.108.130', '112.14.202.81', '112.14.202.140', '112.14.203.86', '112.15.66.132', '112.15.108.199', '112.15.115.136', '112.15.116.121', '112.15.118.39', '112.15.118.81', '112.15.118.95', '112.15.118.121', '112.15.118.154', '112.15.118.173', '112.15.118.197', '112.15.118.239', '112.15.118.244', '112.15.218.81', '112.15.228.33', '112.15.228.80', '112.16.85.20', '112.16.85.22', '112.16.85.35', '112.16.85.39', '112.16.87.34', '112.16.87.120', '112.16.87.171', '112.16.197.112', '112.16.199.177', '112.18.43.227', '112.18.65.226', '112.18.72.18', '112.18.75.32', '112.18.78.68', '112.18.78.69', '112.19.219.127', '112.19.219.148', '112.19.219.249', '112.19.222.95', '112.19.222.143', '112.19.223.29', '120.192.28.78', '120.193.61.171', '120.193.64.10', '120.194.102.10', '120.195.183.17', '120.199.214.64', '120.203.85.250', '120.204.134.245', '120.204.134.247', '120.204.219.197', '111.9.112.245', '111.9.113.23', '112.3.50.36', '112.3.111.13', '112.20.8.57', '112.20.8.59', '112.20.8.110', '112.20.9.153', '112.20.9.164', '112.20.9.178', '112.20.9.192', '112.20.9.248', '112.20.10.20', '112.20.112.128', '112.20.123.47', '112.20.123.66', '112.20.123.72', '112.20.123.88', '112.20.123.89', '112.20.123.92', '112.20.123.101', '112.20.123.105', '112.20.123.108', '112.20.123.126', '112.20.123.135', '112.20.123.159', '112.20.123.161', '112.20.123.163', '112.20.244.236', '112.20.244.240', '112.20.245.45', '112.20.246.2', '112.20.246.52', '112.20.246.65', '117.131.9.78', '117.131.12.175', '117.131.12.184', '117.131.12.189', '117.131.12.207', '117.131.12.233', '117.131.12.234', '117.131.12.255', '117.131.18.214', '117.131.21.224', '117.131.68.186', '117.131.84.96', '117.135.25.7', '117.135.84.158', '117.135.84.186', '117.135.85.37', '117.135.90.57', '117.135.90.173', '117.158.145.167', '117.158.145.178', '117.160.29.185', '117.160.100.84', '117.160.104.5', '117.163.52.92', '117.163.60.23', '117.163.250.186', '117.163.250.231', '117.163.251.41', '117.163.251.73', '117.164.97.249', '117.164.100.225', '117.164.104.12', '117.164.213.156', '117.164.233.249', '117.164.234.89', '117.165.71.84', '117.165.173.4', '117.165.188.208', '117.165.198.21', '117.165.198.27', '117.165.201.238', '117.165.201.251', '117.165.202.180', '117.166.67.96', '117.166.70.193', '117.166.70.221', '117.166.161.228', '117.168.194.45', '117.169.202.43', '117.169.202.69', '117.170.136.83', '117.170.136.87', '117.170.200.7', '117.171.9.58', '117.171.58.231', '117.171.117.38', '117.171.117.73', '117.173.234.99', '117.173.234.102', '117.174.197.35', '117.174.197.48', '117.174.200.81', '117.174.200.82', '117.174.200.88', '117.174.200.91', '117.174.200.113', '117.174.200.145', '117.174.200.151', '117.174.200.162', '117.174.200.165', '117.174.200.176', '117.174.200.195', '117.174.237.241', '117.175.214.77', '117.175.214.83', '117.175.214.109', '117.177.2.105', '117.177.2.106', '117.177.2.107', '117.177.2.109', '117.177.2.110', '117.177.6.104', '117.177.6.108', '117.177.6.109', '117.177.44.195', '117.177.44.244', '117.177.45.3', '117.177.45.17', '117.177.45.41', '117.178.57.173', '117.178.63.212', '117.178.247.96', '117.180.230.100', '117.180.230.116', '117.180.236.67', '117.180.236.143', '117.180.236.168', '117.180.236.211', '117.181.10.211', '117.181.70.194', '117.181.70.228', '117.181.131.143', '117.181.146.252', '117.181.147.81', '117.181.147.113', '117.181.147.159', '117.181.147.163', '117.181.156.63', '117.184.80.226', '117.184.81.2', '111.5.25.64', '111.5.31.139', '111.5.31.152', '111.5.32.69', '111.5.32.126', '111.5.34.166', '111.5.34.181', '111.5.147.156', '111.6.159.224', '111.6.238.198', '111.6.242.41', '111.6.242.48', '111.6.242.79', '111.6.242.85', '111.6.242.184', '111.6.243.5', '111.6.243.49', '111.6.243.66', '111.6.243.82', '111.6.246.35', '111.6.249.14', '112.21.14.6', '112.22.3.11', '112.22.47.123', '112.22.47.126', '112.22.47.135', '112.22.47.167', '112.22.47.170', '112.22.47.248', '112.22.55.139', '112.22.55.199', '112.22.55.214', '112.22.61.39', '112.22.162.214', '112.22.165.171', '112.22.225.74', '112.22.225.80', '112.22.225.86', '112.22.225.116', '112.22.225.119', '112.22.225.172', '112.22.225.184', '112.22.225.222', '112.22.225.237', '112.22.225.252', '112.22.226.39', '112.22.226.50', '112.22.228.93', '112.23.31.149', '112.24.114.129', '112.24.120.25', '112.24.120.32', '112.24.120.85', '112.24.180.214', '112.24.184.213', '112.37.213.124', '112.37.213.140', '112.37.216.131', '112.37.216.141', '112.37.250.243', '112.37.250.252', '112.38.181.171', '112.38.185.6', '112.38.185.16', '112.39.39.40', '112.39.39.55', '112.39.39.176', '112.39.41.93', '112.39.41.137', '112.39.42.27', '112.39.45.42', '112.43.86.202', '112.43.124.68', '112.43.127.131', '112.43.127.137', '112.43.130.137', '112.43.197.146', '112.43.199.90', '112.44.68.64', '112.44.68.70', '112.44.68.71', '112.44.71.97', '112.44.71.99', '112.44.71.100', '112.44.71.103', '112.44.71.104', '112.45.21.164', '112.45.21.166', '112.45.21.168', '112.45.21.169', '112.45.21.172', '112.45.21.174', '112.45.21.177', '112.45.21.183', '112.45.21.187', '112.45.21.192', '112.45.21.196', '112.45.21.204', '112.45.21.208', '112.45.21.209', '112.45.21.211', '112.45.21.212', '112.45.21.214', '112.45.21.216', '112.45.21.220', '112.45.21.232', '112.45.21.239', '112.45.21.240', '112.45.21.243', '112.45.21.248', '112.45.21.251', '112.45.22.3', '112.45.22.5', '112.45.22.12', '112.45.22.19', '112.45.22.20', '112.45.22.26', '112.45.22.28', '112.45.22.29', '112.45.22.31', '112.45.22.37', '112.45.22.40', '112.45.22.43', '112.45.22.56', '112.45.22.65', '112.45.22.67', '112.45.22.68', '112.45.22.86', '112.45.22.90', '112.45.22.94', '112.45.22.99', '112.45.22.101', '112.45.22.112', '112.45.22.115', '112.45.22.116', '112.45.22.117', '112.45.22.121', '112.45.22.123', '112.45.22.126', '112.45.22.129', '112.45.22.131', '112.45.22.132', '112.45.22.133', '112.45.22.134', '112.45.22.141', '112.45.22.152', '112.45.22.155', '112.45.22.161', '112.45.22.165', '112.45.22.167', '112.45.22.170', '112.45.22.180', '112.45.22.187', '112.45.22.188', '112.45.22.189', '112.45.22.203', '112.45.22.207', '112.45.22.215', '112.45.22.217', '112.45.22.218', '112.45.22.222', '112.45.22.223', '112.45.22.228', '112.45.22.230', '112.45.22.231', '112.45.22.234', '112.45.22.239', '112.45.22.240', '112.45.22.242', '112.45.22.243', '112.45.22.245', '112.45.22.247']
for name_server in name_server_list:
    try:
        response=query(domain,name_server)
        if response is not None and len(response.answer) !=0:
            e.append(name_server)

    except dns.exception.Timeout:
        #e.append(name_server)
        print 'timeout'

    except dns.exception.FormError:
        #e.append(name_server)
        print 'formerror'
    
    except socket.error:
        #e.append(name_server)
        print 'socket error,connection forced closed'

print e
#['120.209.176.236', '120.209.185.245', '120.209.185.249']
#[, '120.209.176.236', '120.209.185.245', '120.209.185.249']